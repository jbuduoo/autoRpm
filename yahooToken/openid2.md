# yahoo OpenID2 實作

# 參考網站 https://developer.yahoo.com/oauth2/guide/openid_connect/getting_started.html
# client ID 設定的地方:https://developer.yahoo.com/apps/

# Client ID (Consumer Key):dj0yJmk9amZOUkxiVDJ6b1NrJmQ9WVdrOWRITnpaVTl5Y0RJbWNHbzlNQT09JnM9Y29uc3VtZXJzZWNyZXQmc3Y9MCZ4PTNk
# Client Secret (Consumer Secret):bb7954e0ea1ec7bd72742e1a77110a7591b3d88e

# api網址:
https://api.login.yahoo.com/oauth2/request_auth?
client_id=dj0yJmk9amZOUkxiVDJ6b1NrJmQ9WVdrOWRITnpaVTl5Y0RJbWNHbzlNQT09JnM9Y29uc3VtZXJzZWNyZXQmc3Y9MCZ4PTNk
&response_type=code
&redirect_uri=https://www.ascentac.com/
&scope=openid
&nonce=YihsFwGKgt3KJUh6tPs2

# 回傳
https://www.ascentac.com/en/?code=f6695bvpb7h8yp7cegx67qyhbfptqn7a

## Base64 encoding of client_id:client_secret
dj0yJmk9amZOUkxiVDJ6b1NrJmQ9WVdrOWRITnpaVTl5Y0RJbWNHbzlNQT09JnM9Y29uc3VtZXJzZWNyZXQmc3Y9MCZ4PTNk:bb7954e0ea1ec7bd72742e1a77110a7591b3d88e
## 結果
Basic ZGoweUptazlhbVpPVWt4aVZESjZiMU5ySm1ROVdWZHJPV1JJVG5wYVZUbDVZMFJKYldOSGJ6bE5RVDA5Sm5NOVkyOXVjM1Z0WlhKelpXTnlaWFFtYzNZOU1DWjRQVE5rOmJiNzk1NGUwZWExZWM3YmQ3Mjc0MmUxYTc3MTEwYTc1OTFiM2Q4OGU=
Basic ZGoweUptazlhVmhuVVd0d1REUm5abko2Sm1ROVdWZEthbHBIVm0xaFFTMHRKbk05WTI5dWMzVnRaWEp6WldOeVpYUW1lRDA1TWctLTowOWVkNDU2ZjkyODY4MjAwOWI1MTMyMzcyYTBiZWVkZTM5YzgyZmEz



{
    "access_token": "OgVs6EGduFtOt5YotlPkBYO5SMUdlc2h9sesLu2IHlIrQvQxmj9kDEauqWazRo8yJtLQy_VFDDu7gaVQZdnBeHXtEyabUwJO6tH12PpoaULzxRhvOf3c_s2jlNn04WhmiuLSesJTmhRwh3eyQJcxpv1e7CiB6_XUbXs1u6MYG6la8c_l7ckQC1yp_nGNr41lmqDlmUAyda2lCxoHLMkpL6roDIkGXg6j7k14FIUAdWKVLObIYuFlk1YqjV2ggiiB0kbYGu6PTU5w1LbzqPh94j4qN4J9DYOw5kWAM99fc1d.ld6H6C.dHIlt.2aX7ZJa_6miPWf_3_.z_SRDIEZQppJ2ShupscymuYVCvxJZ0U9YOVsaZfgqONgEXGQTJt3LSU.Gna63XRv.D.JnWBetgz1A73oow5sQN5atiOdzXm24XDoutzd0OOiWLUChM6pLkEDRCSOmZnByV7l2jRT2fI6h48dFNQ3KXt8T_hBkK0l4Qxz5wQE2shKFU71swGmCvu7h4EXzesNJUNmGyMXlJhTWCybYACSN9cHPvKsfB9QkafF6Iz8I2Mra8LRDsN53BliR.lenHBWwx4hHXJ70SfdveC0cDIBpCrhyfwKwtMQC2Qd5Qe6pFg1TENbihsv5QagoLVsKX83SorqnUMpqWBZUE_UIKjG0ibHvYfNP0Z8FPRBv43onlpTv36SSKjcsLMSI_bozYUnuurQwuGRUsGWbbxKspR70My0lKfZyYP4T_WjYv.0CXnlA.3S730mlhftK67fW1skwFYj9OVwPCf1kELRAso_Ww8dkw_.3v7QN12lLlskqmpA.oKt97j4UOmwSejNckVtEFXTTxt9eI1s_dyC_B.56HKZiH0V_YxEbpue1tTORGRyU9d3wi06tpKfFvxPqa9b.K.Cta83SgxxlpzQS4RSRVB1vGSNGPjzzFgLW8h1NOlJ8Hkm.l_or3CozokEAfz_J5yrX1rOdgGl0ua7p7keg_ZcHJehpKS1Yzcsd",
    "refresh_token": "AJMLWWIcv54rZBvxA6a3wW2ZjPIkR87H.w1QgdEMdAx7E4CM0Hc-",
    "expires_in": 3600,
    "token_type": "bearer",
    "id_token": "eyJhbGciOiJFUzI1NiIsImtpZCI6IjM0NjZkNTFmN2RkMGM3ODA1NjU2ODhjMTgzOTIxODE2YzQ1ODg5YWQifQ.eyJhdF9oYXNoIjoiWUV3d0lOWUFqOHlyN1BzQmFtUDB3dyIsInN1YiI6Ik01WlFJS0dONVlSTVBWR1FHRTVFRkVXSFBFIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsImlzcyI6Imh0dHBzOi8vYXBpLmxvZ2luLnlhaG9vLmNvbSIsIm5vbmNlIjoiWWloc0Z3R0tndDNLSlVoNnRQczIiLCJzaWQiOiI0UlpiVWs5Zk5mU0ciLCJhdWQiOiJkajB5Sm1rOWFtWk9Va3hpVkRKNmIxTnJKbVE5V1Zkck9XUklUbnBhVlRsNVkwUkpiV05IYnpsTlFUMDlKbk05WTI5dWMzVnRaWEp6WldOeVpYUW1jM1k5TUNaNFBUTmsiLCJhdXRoX3RpbWUiOjE2NDk5MjYzMDcsInNlc3Npb25fZXhwIjoxNjUxMTM1OTA3LCJleHAiOjE2NTAwMDgzMTEsImFwcF9pZCI6ImRqMHlKbWs5YW1aT1VreGlWREo2YjFOckptUTlXVmRyT1dSSVRucGFWVGw1WTBSSmJXTkhiemxOUVQwOUpuTTlZMjl1YzNWdFpYSnpaV055WlhRbWMzWTlNQ1o0UFROayIsImlhdCI6MTY1MDAwNDcxMSwiZW1haWwiOiJqYnVkdW9vMTIzQHlhaG9vLmNvbSJ9.JeVLrJ15CtgFcvBoH86qNNIgQQnzOyUR6XDH9ZQJ_YJpEmJ_klPOd63RnxbS3eXd2_elIVSwVgRI8H0_Guethg"
}

#id_token依照.分成三段
eyJhbGciOiJFUzI1NiIsImtpZCI6IjM0NjZkNTFmN2RkMGM3ODA1NjU2ODhjMTgzOTIxODE2YzQ1ODg5YWQifQ.
eyJhdF9oYXNoIjoiSjF0WmdUX2pQNHJoVHdxMGNXeDhHdyIsInN1YiI6Ik01WlFJS0dONVlSTVBWR1FHRTVFRkVXSFBFIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsImlzcyI6Imh0dHBzOi8vYXBpLmxvZ2luLnlhaG9vLmNvbSIsIm5vbmNlIjoiWWloc0Z3R0tndDNLSlVoNnRQczIiLCJzaWQiOiI0UlpiVWs5Zk5mU0ciLCJhdWQiOiJkajB5Sm1rOWFtWk9Va3hpVkRKNmIxTnJKbVE5V1Zkck9XUklUbnBhVlRsNVkwUkpiV05IYnpsTlFUMDlKbk05WTI5dWMzVnRaWEp6WldOeVpYUW1jM1k5TUNaNFBUTmsiLCJhdXRoX3RpbWUiOjE2NDk5MjYzMDcsInNlc3Npb25fZXhwIjoxNjUxMTM1OTA3LCJleHAiOjE2NTAwMTAyMDYsImlhdCI6MTY1MDAwNjYwNiwiYXBwX2lkIjoiZGoweUptazlhbVpPVWt4aVZESjZiMU5ySm1ROVdWZHJPV1JJVG5wYVZUbDVZMFJKYldOSGJ6bE5RVDA5Sm5NOVkyOXVjM1Z0WlhKelpXTnlaWFFtYzNZOU1DWjRQVE5rIiwiZW1haWwiOiJqYnVkdW9vMTIzQHlhaG9vLmNvbSJ9.
_FOxs6TF9IkXbuYIKF7nALZFWZTYbyy-uDTT3rVkWX5lLT7dTl4itgcN8eHZsHEA2at-guPUmIA1Q5TnkVC9ig

#base64decode
{
"alg":"ES256",
"kid":"3466d51f7dd0c780565688c183921816c45889ad"
}
{
  "at_hash": "J1tZgT_jP4rhTwq0cWx8Gw",
  "sub": "M5ZQIKGN5YRMPVGQGE5EFEWHPE",
  "email_verified": true,
  "iss": "https://api.login.yahoo.com",
  "nonce": "YihsFwGKgt3KJUh6tPs2",
  "sid": "4RZbUk9fNfSG",
  "aud": "dj0yJmk9amZOUkxiVDJ6b1NrJmQ9WVdrOWRITnpaVTl5Y0RJbWNHbzlNQT09JnM9Y29uc3VtZXJzZWNyZXQmc3Y9MCZ4PTNk",
  "auth_time": 1649926307,
  "session_exp": 1651135907,
  "exp": 1650010206,
  "iat": 1650006606,
  "app_id": "dj0yJmk9amZOUkxiVDJ6b1NrJmQ9WVdrOWRITnpaVTl5Y0RJbWNHbzlNQT09JnM9Y29uc3VtZXJzZWNyZXQmc3Y9MCZ4PTNk",
  "email": "jbuduoo123@yahoo.com"
}



https://220.134.220.142:8443




https://api.login.yahoo.com/oauth2/request_auth?
client_id=dj0yJmk9eEFaTzhZVjh0ZWY0JmQ9WVdrOWIzTnFXSFJVYjJNbWNHbzlNQT09JnM9Y29uc3VtZXJzZWNyZXQmc3Y9MCZ4PWM2
&response_type=code
&redirect_uri=https://220.134.220.142:8443
&scope=openid
&nonce=YihsFwGKgt3KJUh6tPs2


grant_type=authorization_code&
redirect_uri=https://220.134.220.142:8443
&code=utszwvfwx6xac9pgnrrjeuwq4ma4jjmu&
client_id=dj0yJmk9eEFaTzhZVjh0ZWY0JmQ9WVdrOWIzTnFXSFJVYjJNbWNHbzlNQT09JnM9Y29uc3VtZXJzZWNyZXQmc3Y9MCZ4PWM2&
client_secret=7165e6fb6537e51e0a569bb3474733ef5f043c79


//用8443做測試:


# yahoo OpenID2 實作

# 參考網站 https://developer.yahoo.com/oauth2/guide/openid_connect/getting_started.html
# client ID 設定的地方:https://developer.yahoo.com/apps/

# Client ID (Consumer Key):dj0yJmk9eEFaTzhZVjh0ZWY0JmQ9WVdrOWIzTnFXSFJVYjJNbWNHbzlNQT09JnM9Y29uc3VtZXJzZWNyZXQmc3Y9MCZ4PWM2

# Client Secret (Consumer Secret):7165e6fb6537e51e0a569bb3474733ef5f043c79

# api網址:
https://api.login.yahoo.com/oauth2/request_auth?
client_id=dj0yJmk9eEFaTzhZVjh0ZWY0JmQ9WVdrOWIzTnFXSFJVYjJNbWNHbzlNQT09JnM9Y29uc3VtZXJzZWNyZXQmc3Y9MCZ4PWM2

&response_type=code
&redirect_uri=https://220.134.220.142:8443
&scope=openid
&nonce=YihsFwGKgt3KJUh6tPs2

# 回傳
https://www.ascentac.com/en/?code=f6695bvpb7h8yp7cegx67qyhbfptqn7a

## Base64 encoding of client_id:client_secret
dj0yJmk9eEFaTzhZVjh0ZWY0JmQ9WVdrOWIzTnFXSFJVYjJNbWNHbzlNQT09JnM9Y29uc3VtZXJzZWNyZXQmc3Y9MCZ4PWM2:7165e6fb6537e51e0a569bb3474733ef5f043c79
## 結果
Basic ZGoweUptazllRUZhVHpoWlZqaDBaV1kwSm1ROVdWZHJPV0l6VG5GWFNGSlZZakpOYldOSGJ6bE5RVDA5Sm5NOVkyOXVjM1Z0WlhKelpXTnlaWFFtYzNZOU1DWjRQV00yOjcxNjVlNmZiNjUzN2U1MWUwYTU2OWJiMzQ3NDczM2VmNWYwNDNjNzk==



{
    "access_token": "OgVs6EGduFtOt5YotlPkBYO5SMUdlc2h9sesLu2IHlIrQvQxmj9kDEauqWazRo8yJtLQy_VFDDu7gaVQZdnBeHXtEyabUwJO6tH12PpoaULzxRhvOf3c_s2jlNn04WhmiuLSesJTmhRwh3eyQJcxpv1e7CiB6_XUbXs1u6MYG6la8c_l7ckQC1yp_nGNr41lmqDlmUAyda2lCxoHLMkpL6roDIkGXg6j7k14FIUAdWKVLObIYuFlk1YqjV2ggiiB0kbYGu6PTU5w1LbzqPh94j4qN4J9DYOw5kWAM99fc1d.ld6H6C.dHIlt.2aX7ZJa_6miPWf_3_.z_SRDIEZQppJ2ShupscymuYVCvxJZ0U9YOVsaZfgqONgEXGQTJt3LSU.Gna63XRv.D.JnWBetgz1A73oow5sQN5atiOdzXm24XDoutzd0OOiWLUChM6pLkEDRCSOmZnByV7l2jRT2fI6h48dFNQ3KXt8T_hBkK0l4Qxz5wQE2shKFU71swGmCvu7h4EXzesNJUNmGyMXlJhTWCybYACSN9cHPvKsfB9QkafF6Iz8I2Mra8LRDsN53BliR.lenHBWwx4hHXJ70SfdveC0cDIBpCrhyfwKwtMQC2Qd5Qe6pFg1TENbihsv5QagoLVsKX83SorqnUMpqWBZUE_UIKjG0ibHvYfNP0Z8FPRBv43onlpTv36SSKjcsLMSI_bozYUnuurQwuGRUsGWbbxKspR70My0lKfZyYP4T_WjYv.0CXnlA.3S730mlhftK67fW1skwFYj9OVwPCf1kELRAso_Ww8dkw_.3v7QN12lLlskqmpA.oKt97j4UOmwSejNckVtEFXTTxt9eI1s_dyC_B.56HKZiH0V_YxEbpue1tTORGRyU9d3wi06tpKfFvxPqa9b.K.Cta83SgxxlpzQS4RSRVB1vGSNGPjzzFgLW8h1NOlJ8Hkm.l_or3CozokEAfz_J5yrX1rOdgGl0ua7p7keg_ZcHJehpKS1Yzcsd",
    "refresh_token": "AJMLWWIcv54rZBvxA6a3wW2ZjPIkR87H.w1QgdEMdAx7E4CM0Hc-",
    "expires_in": 3600,
    "token_type": "bearer",
    "id_token": "eyJhbGciOiJFUzI1NiIsImtpZCI6IjM0NjZkNTFmN2RkMGM3ODA1NjU2ODhjMTgzOTIxODE2YzQ1ODg5YWQifQ.eyJhdF9oYXNoIjoiWUV3d0lOWUFqOHlyN1BzQmFtUDB3dyIsInN1YiI6Ik01WlFJS0dONVlSTVBWR1FHRTVFRkVXSFBFIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsImlzcyI6Imh0dHBzOi8vYXBpLmxvZ2luLnlhaG9vLmNvbSIsIm5vbmNlIjoiWWloc0Z3R0tndDNLSlVoNnRQczIiLCJzaWQiOiI0UlpiVWs5Zk5mU0ciLCJhdWQiOiJkajB5Sm1rOWFtWk9Va3hpVkRKNmIxTnJKbVE5V1Zkck9XUklUbnBhVlRsNVkwUkpiV05IYnpsTlFUMDlKbk05WTI5dWMzVnRaWEp6WldOeVpYUW1jM1k5TUNaNFBUTmsiLCJhdXRoX3RpbWUiOjE2NDk5MjYzMDcsInNlc3Npb25fZXhwIjoxNjUxMTM1OTA3LCJleHAiOjE2NTAwMDgzMTEsImFwcF9pZCI6ImRqMHlKbWs5YW1aT1VreGlWREo2YjFOckptUTlXVmRyT1dSSVRucGFWVGw1WTBSSmJXTkhiemxOUVQwOUpuTTlZMjl1YzNWdFpYSnpaV055WlhRbWMzWTlNQ1o0UFROayIsImlhdCI6MTY1MDAwNDcxMSwiZW1haWwiOiJqYnVkdW9vMTIzQHlhaG9vLmNvbSJ9.JeVLrJ15CtgFcvBoH86qNNIgQQnzOyUR6XDH9ZQJ_YJpEmJ_klPOd63RnxbS3eXd2_elIVSwVgRI8H0_Guethg"
}

#id_token依照.分成三段
eyJhbGciOiJFUzI1NiIsImtpZCI6IjM0NjZkNTFmN2RkMGM3ODA1NjU2ODhjMTgzOTIxODE2YzQ1ODg5YWQifQ.
eyJhdF9oYXNoIjoiSjF0WmdUX2pQNHJoVHdxMGNXeDhHdyIsInN1YiI6Ik01WlFJS0dONVlSTVBWR1FHRTVFRkVXSFBFIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsImlzcyI6Imh0dHBzOi8vYXBpLmxvZ2luLnlhaG9vLmNvbSIsIm5vbmNlIjoiWWloc0Z3R0tndDNLSlVoNnRQczIiLCJzaWQiOiI0UlpiVWs5Zk5mU0ciLCJhdWQiOiJkajB5Sm1rOWFtWk9Va3hpVkRKNmIxTnJKbVE5V1Zkck9XUklUbnBhVlRsNVkwUkpiV05IYnpsTlFUMDlKbk05WTI5dWMzVnRaWEp6WldOeVpYUW1jM1k5TUNaNFBUTmsiLCJhdXRoX3RpbWUiOjE2NDk5MjYzMDcsInNlc3Npb25fZXhwIjoxNjUxMTM1OTA3LCJleHAiOjE2NTAwMTAyMDYsImlhdCI6MTY1MDAwNjYwNiwiYXBwX2lkIjoiZGoweUptazlhbVpPVWt4aVZESjZiMU5ySm1ROVdWZHJPV1JJVG5wYVZUbDVZMFJKYldOSGJ6bE5RVDA5Sm5NOVkyOXVjM1Z0WlhKelpXTnlaWFFtYzNZOU1DWjRQVE5rIiwiZW1haWwiOiJqYnVkdW9vMTIzQHlhaG9vLmNvbSJ9.
_FOxs6TF9IkXbuYIKF7nALZFWZTYbyy-uDTT3rVkWX5lLT7dTl4itgcN8eHZsHEA2at-guPUmIA1Q5TnkVC9ig

#base64decode
{
"alg":"ES256",
"kid":"3466d51f7dd0c780565688c183921816c45889ad"
}
{
  "at_hash": "J1tZgT_jP4rhTwq0cWx8Gw",
  "sub": "M5ZQIKGN5YRMPVGQGE5EFEWHPE",
  "email_verified": true,
  "iss": "https://api.login.yahoo.com",
  "nonce": "YihsFwGKgt3KJUh6tPs2",
  "sid": "4RZbUk9fNfSG",
  "aud": "dj0yJmk9amZOUkxiVDJ6b1NrJmQ9WVdrOWRITnpaVTl5Y0RJbWNHbzlNQT09JnM9Y29uc3VtZXJzZWNyZXQmc3Y9MCZ4PTNk",
  "auth_time": 1649926307,
  "session_exp": 1651135907,
  "exp": 1650010206,
  "iat": 1650006606,
  "app_id": "dj0yJmk9amZOUkxiVDJ6b1NrJmQ9WVdrOWRITnpaVTl5Y0RJbWNHbzlNQT09JnM9Y29uc3VtZXJzZWNyZXQmc3Y9MCZ4PTNk",
  "email": "jbuduoo123@yahoo.com"
}



https://220.134.220.142:8443




https://api.login.yahoo.com/oauth2/request_auth?
client_id=dj0yJmk9eEFaTzhZVjh0ZWY0JmQ9WVdrOWIzTnFXSFJVYjJNbWNHbzlNQT09JnM9Y29uc3VtZXJzZWNyZXQmc3Y9MCZ4PWM2
&response_type=code
&redirect_uri=https://220.134.220.142:8443
&scope=openid
&nonce=YihsFwGKgt3KJUh6tPs2




用戶名和電子郵件地址
"name": "Jasmine Smith",
"email": "jasmine_smith@yahoo.com"
